# ==============================================================================
# GESTIONE FLOTTA - Configurazione Trascrizione Audio
# ==============================================================================
# File: impostazioni/trascrizione.conf
# Versione: 1.0.0
# Data: 2026-02-03
#
# Formato: CHIAVE=valore (una per riga)
# Righe vuote e commenti (#) vengono ignorati
# ==============================================================================

# --- MODELLI WHISPER ---
# Modello principale (alta qualita, piu lento)
MODELLO=large-v3-turbo
# Modello veloce (6x piu veloce, -1/2% accuratezza)
MODELLO_VELOCE=large-v3-turbo
# Lingua di default
LINGUA_DEFAULT=it
# Device (cpu o cuda)
DEVICE=cpu
# Tipo computazione (int8, float16, float32)
COMPUTE_TYPE=int8

# --- ORARI OPERATIVI ---
# Ora inizio accettazione file (0-23)
ORARIO_INIZIO=7
# Ora stop nuove elaborazioni (0-23, deve essere prima del riavvio server ore 5)
ORARIO_STOP=4

# --- SOGLIE E LIMITI ---
# Soglia file grande in MB (priorita bassa, elaborazione serale)
SOGLIA_GRANDE_MB=150
# Dimensione massima upload in MB
MAX_UPLOAD_MB=500
# Numero file in coda oltre il quale usare modello veloce
SOGLIA_CODA_TURBO=3

# --- RETENTION ---
# Giorni conservazione audio per trascrizioni cliente
RETENTION_AUDIO_GIORNI=180
# Giorni conservazione testo per trascrizioni a consumo (dashboard)
RETENTION_CONSUMO_GIORNI=21

# --- FORMATI AUDIO ACCETTATI ---
# Lista separata da virgola (senza spazi)
FORMATI_AUDIO=aac,mp3,m4a,wav,ogg,opus,wma,flac,amr,webm,3gp,mp4,caf

# --- WORKER ---
# Intervallo polling coda in secondi
POLLING_SECONDI=30
# Intervallo aggiornamento progresso in secondi
AGGIORNAMENTO_PROGRESSO=15

# --- FIX SISTEMA ---
# Libreria da precaricare per faster-whisper
LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libgomp.so.1

# Numero thread CPU per trascrizione (default: 4)
NUM_THREADS=10
