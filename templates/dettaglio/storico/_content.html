{# ==============================================================================
   STORICO - File satellite (estratto da dettaglio.html)
   Data estrazione: 2026-02-10 16:41
   Generato da: modularizza_dettaglio.py
   ============================================================================== #}
{% if storico %}
<div class="card">
    <div class="card-header py-2" style="cursor: pointer;" data-bs-toggle="collapse" data-bs-target="#collapse-storico">
        <i class="bi bi-chevron-right me-1 collapse-icon"></i>
        <i class="bi bi-clock-history"></i> Storico Modifiche ({{ storico|length }})
    </div>
    <div class="collapse" id="collapse-storico">
        <div class="table-responsive">
            <table class="table table-sm mb-0">
                <thead class="table-light">
                    <tr><th>Data</th><th>Campo</th><th>Precedente</th><th>Nuovo</th></tr>
                </thead>
                <tbody>
                    {% for s in storico %}
                    <tr>
                        <td><small>{{ s.data_modifica[:16] }}</small></td>
                        <td><code>{{ s.campo_modificato }}</code></td>
                        <td><small>{{ s.valore_precedente[:30] }}{% if s.valore_precedente|length > 30 %}...{% endif %}</small></td>
                        <td><small>{{ s.valore_nuovo[:30] }}{% if s.valore_nuovo|length > 30 %}...{% endif %}</small></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endif %}
