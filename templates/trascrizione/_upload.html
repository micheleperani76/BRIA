<!-- ==========================================================================
     TRASCRIZIONE - Riquadro Upload Audio
     ========================================================================== -->

<div class="card shadow-sm">
    <div class="card-header bg-primary text-white">
        <h5 class="mb-0"><i class="bi bi-cloud-arrow-up me-2"></i>Carica Registrazione</h5>
    </div>
    <div class="card-body">
        <!-- Area Drag & Drop -->
        <div id="drop-zone" class="drop-zone" onclick="document.getElementById('file-audio').click()">
            <i class="bi bi-mic-fill" style="font-size: 2.5rem; color: #6c757d;"></i>
            <p class="mt-2 mb-1 fw-semibold">Trascina qui il file audio</p>
            <p class="text-muted small mb-0">oppure clicca per selezionare</p>
            <p class="text-muted small mt-2 mb-0">
                Formati: AAC, MP3, M4A, WAV, OGG, OPUS, WMA, FLAC, AMR, WebM, 3GP, MP4, CAF<br>
                Max: 500 MB
            </p>
        </div>
        
        <input type="file" id="file-audio" class="d-none" 
               accept=".aac,.mp3,.m4a,.wav,.ogg,.opus,.wma,.flac,.amr,.webm,.3gp,.mp4,.caf">
        
        <!-- Info file selezionato -->
        <div id="file-info" class="mt-3" style="display: none;">
            <div class="d-flex align-items-center justify-content-between p-3 bg-light rounded">
                <div>
                    <i class="bi bi-file-earmark-music text-primary me-2"></i>
                    <span id="file-nome" class="fw-semibold"></span>
                    <span id="file-dimensione" class="text-muted ms-2 small"></span>
                </div>
                <button class="btn btn-sm btn-outline-danger" onclick="rimuoviFile()">
                    <i class="bi bi-x-lg"></i>
                </button>
            </div>
        </div>
        
        <!-- Avviso consumo (solo dashboard) -->
        <div id="avviso-consumo" class="alert alert-info mt-3 mb-0 small">
            <i class="bi bi-info-circle me-1"></i>
            <strong>Trascrizione a consumo:</strong> Il file audio non verr&agrave; conservato dopo la trascrizione. 
            Il testo sar&agrave; disponibile per <strong>21 giorni</strong>.
        </div>
        
        <!-- Pulsante upload -->
        <button id="btn-upload" class="btn btn-primary w-100 mt-3" onclick="inviaAudio()" disabled>
            <i class="bi bi-send me-1"></i>Invia per Trascrizione
        </button>
        
        <!-- Progress bar upload -->
        <div id="upload-progress" class="mt-3" style="display: none;">
            <div class="progress" style="height: 25px;">
                <div id="upload-bar" class="progress-bar progress-bar-striped progress-bar-animated" 
                     role="progressbar" style="width: 0%;">
                    <span id="upload-text">Caricamento...</span>
                </div>
            </div>
        </div>
        
        <!-- Risultato upload -->
        <div id="upload-risultato" class="mt-3" style="display: none;"></div>
    </div>
</div>
